# QueryNest 环境变量配置示例
# 复制此文件为 .env 并根据实际情况修改配置值

# 配置文件路径
QUERYNEST_CONFIG_PATH=config.yaml

# 日志级别 (DEBUG, INFO, WARNING, ERROR)
QUERYNEST_LOG_LEVEL=INFO

# MCP传输方式 (stdio, http)
QUERYNEST_MCP_TRANSPORT=stdio

# HTTP模式配置 (仅当 QUERYNEST_MCP_TRANSPORT=http 时使用)
# QUERYNEST_MCP_HOST=0.0.0.0
# QUERYNEST_MCP_PORT=8000

# MongoDB密码配置
# 生产环境MongoDB密码
MONGO_PROD_PASSWORD=your_prod_password_here

# 测试环境MongoDB密码
MONGO_TEST_PASSWORD=your_test_password_here

# 开发环境MongoDB密码
MONGO_DEV_PASSWORD=your_dev_password_here

# Docker Compose 相关环境变量
# 如果使用 Docker Compose，以上变量会被自动使用

# 注意事项：
# 1. 请勿将包含敏感信息的 .env 文件提交到版本控制系统
# 2. 生产环境建议使用更安全的密码管理方案
# 3. 环境变量优先级高于配置文件中的设置

# =============================================================================
# 服务配置
# =============================================================================

# QueryNest 服务运行环境
# 可选值: development, testing, production
QUERYNEST_ENV=development

# 服务监听端口
QUERYNEST_PORT=8000

# 服务监听地址
QUERYNEST_HOST=0.0.0.0

# 配置文件路径
QUERYNEST_CONFIG_PATH=config.yaml

# =============================================================================
# 安全配置
# =============================================================================

# JWT 密钥（用于会话管理）
JWT_SECRET_KEY=your_jwt_secret_key_here_make_it_long_and_random

# API 密钥（用于 MCP 客户端认证）
API_SECRET_KEY=your_api_secret_key_here

# 加密密钥（用于敏感数据加密）
ENCRYPTION_KEY=your_encryption_key_32_characters_long

# 向后兼容
QUERYNEST_SECRET_KEY=your_secret_key_here_change_this_in_production
QUERYNEST_ENCRYPTION_KEY=your_encryption_key_here_32_chars_long

# =============================================================================
# 日志配置
# =============================================================================

# 日志级别
LOG_LEVEL=INFO
QUERYNEST_LOG_LEVEL=INFO

# 日志文件路径
LOG_FILE_PATH=logs/querynest.log

# 是否启用调试模式
DEBUG_MODE=false
QUERYNEST_DEBUG=false

# =============================================================================
# 缓存配置
# =============================================================================

# Redis 连接配置
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password_here
REDIS_DB=0
REDIS_ENABLED=false

# 缓存配置
QUERYNEST_CACHE_TTL=300

# =============================================================================
# 查询引擎配置
# =============================================================================

# 单次查询最大返回文档数
QUERY_MAX_DOCUMENTS=1000

# 查询最大执行时间（秒）
QUERY_MAX_EXECUTION_TIME=30
QUERYNEST_QUERY_TIMEOUT=30

# 最大并发查询数
QUERY_MAX_CONCURRENT=10
QUERYNEST_MAX_CONNECTIONS=100

# =============================================================================
# 数据脱敏配置
# =============================================================================

# 是否启用数据脱敏
DATA_MASKING_ENABLED=true

# 脱敏策略严格程度
DATA_MASKING_LEVEL=moderate

# =============================================================================
# 监控配置
# =============================================================================

# 是否启用指标收集
QUERYNEST_ENABLE_METRICS=true

# Prometheus 指标导出端口
PROMETHEUS_PORT=9090
QUERYNEST_METRICS_PORT=9000

# 是否启用健康检查
HEALTH_CHECK_ENABLED=true

# =============================================================================
# 扫描器配置
# =============================================================================

# 是否启用自动扫描
SCANNER_AUTO_SCAN=true

# 扫描间隔（秒）
SCANNER_INTERVAL=3600

# 每个集合最大采样文档数
SCANNER_MAX_SAMPLE_DOCS=100

# =============================================================================
# Docker 服务配置（用于 docker-compose）
# =============================================================================

# MongoDB Express管理界面
MONGOEXPRESS_LOGIN=admin
MONGOEXPRESS_PASSWORD=your_mongoexpress_password_here

# Grafana配置
GRAFANA_USER=admin
GRAFANA_PASSWORD=your_grafana_password_here

# =============================================================================
# 外部服务配置（可选）
# =============================================================================

# OpenAI API 配置（用于语义分析）
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-3.5-turbo
AI_SEMANTIC_ANALYSIS=false

# =============================================================================
# 网络配置
# =============================================================================

# 连接超时配置（秒）
CONNECTION_TIMEOUT=5
SOCKET_TIMEOUT=30

# =============================================================================
# 安全增强
# =============================================================================

# 是否启用 IP 白名单
IP_WHITELIST_ENABLED=false

# 是否启用请求频率限制
RATE_LIMITING_ENABLED=true

# 每分钟最大请求数
RATE_LIMIT_PER_MINUTE=100

# =============================================================================
# 实验性功能
# =============================================================================

# 是否启用查询优化建议
QUERY_OPTIMIZATION_SUGGESTIONS=true

# 是否启用智能缓存
SMART_CACHING=true